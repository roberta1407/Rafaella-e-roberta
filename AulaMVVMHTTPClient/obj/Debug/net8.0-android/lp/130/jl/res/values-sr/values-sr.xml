0:r.ClickThroughUrl)!==null&&y!==void 0?y:"";const g={dsbScenario:o,tilesToShow:3,showAriaMessage:!1,tileSpacing:0,containerID:f,moveSlides:3,noPaddingCarousel:!0};return React.createElement("div",{id:`${f}${u?"_full_width":""}_container`+o,key:`${f}${u?"_full_width":""}_container`+o,"aria-label":p,className:"mega dsb-mega mega-cashback","data-region":o,"data-partnertag":t.whenTestHooks(`DSB.${o}`),"data-h":e===null||e===void 0?void 0:e.getHValue(),onClick:t=>{var i;w&&((i=t.persist)===null||i===void 0?void 0:i.call(t),t.stopPropagation(),n.clickDSBHandler(t.nativeEvent,w,e))},role:"link"},React.createElement(i.MegaHeader,{className:`dsb-mega__header ${w?" dsb-clickable-containers":""}`,isFullWidthDSB:u,FieldsStore:r,imageHostName:b,instrumentedItem:e,megaTitle:p,megaLinkId:`${k}${u?"_full_width":""}`,sponsorImageId:d,ariaLabel:p}),React.createElement("div",{className:"cashback-items"},React.createElement(i.MegaCarouselComponent,Object.assign({},g),r.Items.map((t,i)=>{var s;const{Publisher:h,Title:c,Description:o,Thumbnail:e,instrumentedItem:l,ClickThroughUrl:a}=t;let v=`${f}${u?"_full_width":""}_item${i}`;const p=u?e===null||e===void 0?void 0:e.ThumbnailHeightV2:e===null||e===void 0?void 0:e.ThumbnailHeight,w=u?e===null||e===void 0?void 0:e.ThumbnailWidthV2:e===null||e===void 0?void 0:e.ThumbnailWidth,k=n.getImageStyleMegaExt((s=t.Thumbnail)===null||s===void 0?void 0:s.ThumbnailId,2,n.DSBScenario.CashbackAds,b,!1,!1,u,w,p,!0),y=t.CaptionResourceKey?n.Host.getLocString(t.CaptionResourceKey,t.Caption,t.ItemMetadata):c;return React.createElement("div",{id:v,key:v,className:"item focusable",tabIndex:-1,"data-h":l.getHValue(),role:"link","aria-label":`${h} ${y}`+(o&&` ${o}`),"aria-posinset":i+1,"aria-setsize":r.Items.length,onClick:t=>{var i;a&&((i=t.persist)===null||i===void 0?void 0:i.call(t),t.stopPropagation(),n.clickDSBHandler(t.nativeEvent,a,l))}},React.createElement("div",{className:"ad-img",style:k}),React.createElement("div",{className:"ad-text",title:`${c}`},React.createElement("span",{className:"ad-publisher"},h),React.createElement("span",{className:"ad-description"},y),o&&React.createElement("span",{className:"ad-sub-description"},o)))}))))}}i.MegaCashback=r})(r=i.Templates||(i.Templates={}))})(i=t.DSB||(t.DSB={}))})(t=n.View||(n.View={}))}(WSB||(WSB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){class i extends React.Component{click(t,i,r,u){var f,e;n.Host.launchDSBUriAsync((e=(f=r.ClickThroughUrl)!==null&&f!==void 0?f:u.ClickThroughUrl)!==null&&e!==void 0?e:"",i,t)}render(){var i,r;const{FieldsStore:n,imageHostName:f,id:e,isFullWidthDSB:u}=this.props,o=React.createElement("div",null,React.createElement("div",{className:"question"},React.createElement("div",null,n===null||n===void 0?void 0:n.Title)),React.createElement("ul",null,(i=n===null||n===void 0?void 0:n.Items)===null||i===void 0?void 0:i.sort((n,t)=>{var i,r;return((i=n.Index)!==null&&i!==void 0?i:0)-((r=t.Index)!==null&&r!==void 0?r:0)}).map((t,i)=>{var r;let f=t.Title,e=(r=t.Index)!==null&&r!==void 0?r:i;const u=`$mega_${n.Scenario}_${i}`;return React.createElement("li",{className:"mru-poll",id:u,key:u,onClick:i=>{this.click(i.nativeEvent,t.instrumentedItem,t,n),i.stopPropagation()},tabIndex:-1},React.createElement("div",{className:"initial"},String.fromCharCode(65+e)+".","Â "),React.createElement("div",{className:"pillans"},f))})));return React.createElement(t.MegaContent,{containerClassName:"dsb-poll",isFullWidthDSB:u,children:o,FieldsStore:n,instrumentedItem:(r=this===null||this===void 0?void 0:this.props)===null||r===void 0?void 0:r.instrumentedItem,headerClassName:"dsb-poll__header",id:`${e}${u?"_full_width":""}`,scenario:n===null||n===void 0?void 0:n.Scenario,imageHostName:f})}}t.UgcPoll=i})(i=t.Templates||(t.Templates={}))})(i=t.DSB||(t.DSB={}))})(t=n.View||(n.View={}))}(WSB||(WSB={}));const MobileAppUpsellDismissedKey="MobileAppUpsellDismissed",MobileAppUpsellLaunchedKey="MobileAppUpsellLaunched";(function(n){var t;(function(t){var i;(function(i){var r;(function(r){const u=r=>{const{id:u,CaptionResourceKey:o,UpsellQRCodeIcon:h,UpsellHeadingResourceKey:c,UpsellSubheadingResourceKey:l,SeeMoreResourceKey:a,onDismissHandler:s}=r;return React.createElement(React.Fragment,null,s&&React.createElement("div",{className:"dsb-mobile-app-upsell__dismiss-icon selectable focusable",tabIndex:-1,id:u+"_dismiss",role:"button","aria-label":"Dismiss "+n.Host.getLocString(o),onClick:n=>{n.stopPropagation(),s(),e()},"data-partnertag":t.whenTestHooks("MobileAppUpsellCard.Dismiss")},React.createElement(i.DismssIcon,null)),React.createElement("div",{className:"dsb-mobile-app-upsell__container",key:u,id:u},React.createElement("img",{className:"dsb-mobile-app-upsell__qr-code",src:h}),React.createElement("div",{className:"dsb-mobile-app-upsell__details"},React.createElement("span",{className:"dsb-mobile-app-upsell__heading"},n.Host.getLocString(c)),React.createElement("span",{className:"dsb-mobile-app-upsell__subheading"},n.Host.getLocString(l)),React.createElement("button",{className:"dsb-mobile-app-upsell__see-more selectable focusable",tabIndex:-1,id:u+"_action",role:"button","aria-label":n.Host.getLocString(o),onClick:()=>f()},n.Host.getLocString(a)))))},f=()=>{if(_w.localStorage){const n=parseInt(localStorage.getItem(MobileAppUpsellLaunchedKey))+1||1;_w.localStorage.setItem(MobileAppUpsellLaunchedKey,n.toString())}n.InstrumentationHelper.logClientInstEvent("Select",MobileAppUpsellLaunchedKey,n.SequenceNumberManager.getSequenceNumber())},e=()=>{if(_w.localStorage){const n=parseInt(localStorage.getItem(MobileAppUpsellDismissedKey))+1||1;_w.localStorage.setItem(MobileAppUpsellDismissedKey,n.toString())}n.InstrumentationHelper.logClientInstEvent("Select",MobileAppUpsellDismissedKey,null)};class o extends React.Component{render(){var i;const{id:o,FieldsStore:t,Scenario:s,isFullWidthDSB:f,imageHostName:e,onDismissHandler:h}=this.props;if(t){const c=`${o}${f?"_full_width":""}`,l={id:c,CaptionResourceKey:t.CaptionResourceKey,UpsellQRCodeIcon:n.generateBingThumbnailUrlFromId(t.Thumbnail.ThumbnailId,e,t.Thumbnail.ThumbnailWidth,t.Thumbnail.ThumbnailHeight),UpsellHeadingResourceKey:t.Ups